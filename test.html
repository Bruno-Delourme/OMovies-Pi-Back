<!-- Création d'un champ de saisie et d'un bouton de recherche -->
<input type="text" id="searchInput" placeholder="Rechercher un film...">
<button id="searchButton">Rechercher</button>

<!-- Conteneur pour afficher les résultats de la recherche -->
<div id="searchResults"></div>

<script>
// Récupération des éléments du DOM
const searchInput = document.getElementById('searchInput'); // Champ de saisie
const searchResultsContainer = document.getElementById('searchResults'); // Conteneur des résultats

// Ajout d'un écouteur d'événement sur le champ de saisie
searchInput.addEventListener('input', function() {
    // Récupération de la valeur saisie dans le champ de saisie.
    const searchTerm = searchInput.value.trim();

    // Vérification si la longueur de la chaîne de recherche est supérieure ou égale à 2
    if (searchTerm.length >= 2) {
        // Envoi d'une requête au serveur pour récupérer les résultats de la recherche
        fetch(`http://localhost:3000/api/searchBar?query=${encodeURIComponent(searchTerm)}`)
            .then(response => response.json()) // Conversion de la réponse en format JSON
            .then(data => {
                // Affichage des résultats de la recherche
                displaySearchResults(data);
            })
            .catch(error => {
                console.error('Erreur de recherche de films:', error);
            });
    } else {
        // Effacement des résultats de la recherche si la longueur de la chaîne de recherche est inférieure à 2
        clearSearchResults();
    }
});

// Fonction pour afficher les résultats de la recherche
function displaySearchResults(data) {
    // Effacement des résultats précédents
    clearSearchResults();

    // Parcours des données (films) obtenues de la recherche
    data.forEach(movie => {
        // Création d'un élément HTML pour afficher le titre du film
        const movieElement = document.createElement('div');
        movieElement.textContent = movie.title; // Attribution du titre du film à l'élément
        searchResultsContainer.appendChild(movieElement); // Ajout de l'élément au conteneur des résultats
    });
}

// Fonction pour effacer les résultats de la recherche
function clearSearchResults() {
    // Effacement de tous les enfants du conteneur des résultats
    searchResultsContainer.innerHTML = '';
}
</script>
